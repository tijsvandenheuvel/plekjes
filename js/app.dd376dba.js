(function(e){function t(t){for(var o,a,l=t[0],s=t[1],c=t[2],u=0,d=[];u<l.length;u++)a=l[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function l(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f11d95f9"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"f54530f3"}[e]+".css",r=s.p+o,i=document.getElementsByTagName("link"),l=0;l<i.length;l++){var c=i[l],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===r))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){c=d[l],u=c.getAttribute("data-href");if(u===o||u===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=l(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2140:function(e,t,n){"use strict";n("b4ac")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={id:"main"};function r(e,t,n,r,i,l){var s=Object(o["A"])("router-view"),c=Object(o["A"])("Nav");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",a,[Object(o["j"])(s)]),Object(o["j"])(c,{id:"nav"})],64)}var i={class:"nav"},l=Object(o["i"])("I"),s=Object(o["i"])("O"),c=Object(o["i"])("E");function u(e,t,n,a,r,u){var d=Object(o["A"])("router-link");return Object(o["t"])(),Object(o["f"])("div",i,[Object(o["j"])(d,{to:"/intern"},{default:Object(o["I"])((function(){return[l]})),_:1}),Object(o["j"])(d,{to:"/"},{default:Object(o["I"])((function(){return[s]})),_:1}),Object(o["j"])(d,{to:"/extern"},{default:Object(o["I"])((function(){return[c]})),_:1})])}var d={},f=(n("2140"),n("6b0d")),p=n.n(f);const h=p()(d,[["render",u]]);var m=h,k={name:"App",components:{Nav:m},data:function(){return{}}};n("897a");const g=p()(k,[["render",r]]);var v=g,j=n("da6f"),b=n("e370");Object(o["c"])(v).use(j["a"]).use(b["a"]).mount("#app")},"6f5d":function(e,t,n){},7290:function(e,t,n){},"7c15":function(e,t,n){"use strict";n.r(t),n.d(t,"setSelectedPlekje",(function(){return i})),n.d(t,"updateSelectedPlekje",(function(){return l})),n.d(t,"getPlekjesWithoutTags",(function(){return s})),n.d(t,"addSinglePlekjeToMap",(function(){return c})),n.d(t,"removePlekje",(function(){return u})),n.d(t,"createPlekje",(function(){return d})),n.d(t,"renamePlekje",(function(){return f})),n.d(t,"setSelectedPlekollection",(function(){return v})),n.d(t,"getPlekollections",(function(){return j})),n.d(t,"createPlekollection",(function(){return b})),n.d(t,"editPlekollectionFlow",(function(){return y})),n.d(t,"removePlekollection",(function(){return O})),n.d(t,"renamePlekollection",(function(){return P})),n.d(t,"setUserData",(function(){return w})),n.d(t,"checkUserNameAvailability",(function(){return E})),n.d(t,"setFeatureCollectionToEdit",(function(){return J})),n.d(t,"setFeatureCollectionToMap",(function(){return D}));n("4de4"),n("d3b7"),n("accc"),n("0d03"),n("b0c0"),n("e9c4"),n("caad"),n("2532"),n("d81d"),n("ac1f"),n("5319"),n("4160"),n("159b"),n("99af");var o=n("da6f"),a=n("e370"),r=function(e,t,n,o){var a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer ".concat(localStorage.getItem("access_token"))),a.send(n),a.onreadystatechange=function(){4==a.readyState&&"200"==a.status&&o(a.responseText)}};function i(e,t){p(e,(function(e){j(e.tags,(function(e){t(e)}))}))}function l(e,t){var n=o["a"].state.selectedPlekje;switch(t){case"add":n.tags.push(e._id);break;case"remove":n.tags=n.tags.filter((function(t){return t!=e._id}));break}n.updatedAt=(new Date).toISOString(),g(n._id,n,(function(){})),S(e._id,(function(e){switch(t){case"add":e.plekjes.push({_id:n._id,name:n.name});break;case"remove":e.plekjes=e.plekjes.filter((function(e){return e._id!=n._id}));break}e.updatedAt=(new Date).toISOString(),T(e._id,e,(function(){}))}))}function s(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekjes/get_no_tag/",n,(function(e){t(JSON.parse(e))}))}function c(){console.log(o["a"].state.selectedPlekje.name),o["a"].state.featureCollections.map((function(e){return e.props.name})).includes(o["a"].state.selectedPlekje.name)||o["a"].state.featureCollections.push($([o["a"].state.selectedPlekje],!0)),a["a"].replace("/")}function u(){var e=o["a"].state.selectedPlekje;e.tags.length>0&&e.tags.forEach((function(t){_(t,null,[e._id],(function(){}))})),I(null,null,[e],null),o["a"].state.selectedPlekje=null,o["a"].state.editingPlekje=!1}function d(e,t){m(e,t,(function(e){I(null,[e])}))}function f(e){var t=o["a"].state.selectedPlekje;t.name=e,t.updatedAt=(new Date).toISOString(),g(t._id,t,(function(){})),t.tags.forEach((function(n){_(n,[{name:e,_id:g._id}],[t._id],(function(){}))})),I(null,[{name:e,_id:g._id}],[t._id],null),o["a"].state.selectedPlekje=null}var p=function(e,t){r("GET","https://plekjes-server.herokuapp.com/plekjes/get_one/"+e,null,(function(e){if(e){var n=JSON.parse(e);o["a"].state.selectedPlekje=n,t(n)}}))},h=function(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekjes/get_multiple/",n,(function(e){t(JSON.parse(e))}))},m=function(e,t,n){var a={name:t,tags:[],founder:o["a"].state.userData.username,geometry:e.geometry};r("POST","https://plekjes-server.herokuapp.com/plekjes/new",JSON.stringify(a),(function(e){n(JSON.parse(e))}))},k=function(e,t,n){for(var a=[],i=0;i<e.length;i++)a.push({name:e[i].properties.name,tags:[t],founder:o["a"].state.userData.username,geometry:e[i].geometry});r("POST","https://plekjes-server.herokuapp.com/plekjes/add_multiple",JSON.stringify(a),(function(e){n(JSON.parse(e))}))},g=function(e,t,n){r("PUT","https://plekjes-server.herokuapp.com/plekjes/update/"+e,JSON.stringify(t),(function(e){n()}))};function v(e,t){S(e,(function(e){o["a"].state.selectedPlekollection=e,t()}))}function j(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekollections/get_multiple/",n,(function(e){var n=JSON.parse(e);t(n||[])}))}function b(e,t,n){if(e||(e=prompt("Name Plekollection","")),e&&e.length>0&&" "!=e){var a={name:e,collector:o["a"].state.userData.username,plekjes:t};r("POST","https://plekjes-server.herokuapp.com/plekollections/new",JSON.stringify(a),(function(e){var o=JSON.parse(e);I(o,t),n(o)}))}else n(null)}function y(e){var t=o["a"].state.featureCollectionToEdit.props.id;S(t,(function(n){var a=[],r=[];o["a"].state.featureCollectionToEdit.features.forEach((function(e){e.properties.id?r.push(e.properties.id):a.push(e)}));var i=[];n.plekjes.forEach((function(e){r.includes(e._id)||i.push(e._id)})),h(i,(function(e){e.forEach((function(e){e.tags=e.tags.filter((function(e){return e!=t})),e.updatedAt=(new Date).toISOString(),g(e._id,e,(function(){}))}))})),a.length>0?k(a,t,(function(n){I(null,n,null,null),_(t,n,i,(function(){o["a"].state.editingPlekollection=!1,v(t,(function(){D((function(){e()}))}))}))})):_(t,null,i,(function(){o["a"].state.editingPlekollection=!1,v(t,(function(){D((function(){e()}))}))}))}))}function O(){var e=o["a"].state.featureCollectionToEdit.props.id;console.log(e),o["a"].state.featureCollectionToEdit.features&&o["a"].state.featureCollectionToEdit.features>0&&h(o["a"].state.featureCollectionToEdit.features.map((function(e){return e.properties.id})),(function(t){t.forEach((function(t){t.tags=t.tags.filter((function(t){return t!=e})),t.updatedAt=(new Date).toISOString(),g(t._id,t,(function(){o["a"].state.editingPlekollection=!1}))}))})),I(null,null,null,[{_id:e}]),C(e),o["a"].state.editingPlekollection=!1}function P(e){var t=o["a"].state.selectedPlekollection;t.name=e,t.updatedAt=(new Date).toISOString(),T(t._id,t,(function(){})),I(t,null,null,[o["a"].state.selectedPlekollection]),o["a"].state.selectedPlekollection=null}var S=function(e,t){r("GET","https://plekjes-server.herokuapp.com/plekollections/get_one/"+e,null,(function(e){e&&t(JSON.parse(e))}))},_=function(e,t,n,o){S(e,(function(a){a&&(n&&n.length>0&&n.forEach((function(e){a.plekjes=a.plekjes.filter((function(t){return t._id!=e}))})),t&&(a.plekjes=a.plekjes.concat(t)),a.updatedAt=(new Date).toISOString(),T(e,a,(function(){o()})))}))},T=function(e,t,n){r("PUT","https://plekjes-server.herokuapp.com/plekollections/update/"+e,JSON.stringify(t),(function(e){n()}))},C=function(e){r("DELETE","https://plekjes-server.herokuapp.com/plekollections/delete",JSON.stringify({id:e}),(function(e){}))};function w(){var e=JSON.stringify({email:o["a"].state.userEmail});r("POST","https://plekjes-server.herokuapp.com/users/get_one",e,(function(e){var t=JSON.parse(e);t?o["a"].state.userData=t:o["a"].state.userToBeCreated=!0}))}function E(e,t){var n=JSON.stringify({username:e});r("POST","https://plekjes-server.herokuapp.com/users/name_check",n,(function(n){var o="true"===n;o&&N(e),t(o)}))}var N=function(e){var t={email:o["a"].state.userEmail,username:e,my_plekjes:[],my_plekollections:[]};r("POST","https://plekjes-server.herokuapp.com/users/new",JSON.stringify(t),(function(e){o["a"].state.userToBeCreated=!1,w()}))},I=function(e,t,n,a){var i=JSON.stringify({email:o["a"].state.userEmail});r("POST","https://plekjes-server.herokuapp.com/users/get_one",i,(function(o){var i=JSON.parse(o);if(a){var l=a.map((function(e){return e._id}));i.my_plekollections=i.my_plekollections.filter((function(e){return!l.includes(e._id)}))}if(e&&i.my_plekollections.push({name:e.name,_id:e._id}),n){var s=n.map((function(e){return e._id}));i.my_plekjes=i.my_plekjes.filter((function(e){return!s.includes(e._id)}))}t&&t.length>0&&(i.my_plekjes=i.my_plekjes.concat(t)),r("PUT","https://plekjes-server.herokuapp.com/users/update/"+i._id,JSON.stringify(i),(function(e){w()}))}))};function J(e){o["a"].state.editingPlekollection=!0,o["a"].state.featureCollections=[],A((function(t){o["a"].state.featureCollectionToEdit=t,e()}))}function D(e){o["a"].state.featureCollections.map((function(e){return e.props.name})).includes(o["a"].state.selectedPlekollection.name)?a["a"].replace("/"):A((function(t){o["a"].state.featureCollections.push(t),e()}))}var A=function(e){var t=o["a"].state.selectedPlekollection.plekjes.map((function(e){return e._id}));h(t,(function(t){e($(t))}))},$=function(e,t){var n;return n=t?{type:"FeatureCollection",props:{name:o["a"].state.selectedPlekje.name,id:o["a"].state.selectedPlekje._id},features:[]}:{type:"FeatureCollection",props:{name:o["a"].state.selectedPlekollection.name,id:o["a"].state.selectedPlekollection._id},features:[]},e.forEach((function(e){n.features.push({type:"Feature",properties:{name:e.name,id:e._id},geometry:e.geometry})})),n}},"897a":function(e,t,n){"use strict";n("6f5d")},"9d7c":function(e,t,n){"use strict";n("7290")},b4ac:function(e,t,n){},da6f:function(e,t,n){"use strict";n("4de4"),n("d3b7"),n("b0c0"),n("e9c4"),n("0d03"),n("ac1f"),n("5319");var o=n("5502"),a=n("b0af"),r=n("e370");t["a"]=Object(o["a"])({state:{auth0:new a["a"].WebAuth({domain:"tijs-app.eu.auth0.com",clientID:"GSTtuqSVd4zA7NvQ8qeVszNDDMhJq0Hi",redirectUri:"https://tijsvandenheuvel.github.io/plekjes/auth0callback",responseType:"token id_token",scope:"openid profile email",audience:"https://plekjes-api.be"}),userIsAuthenticated:!1,userEmail:null,userData:null,userToBeCreated:!1,selectedPlekollection:null,selectedPlekje:null,featureCollections:[],featureCollectionToEdit:null,featureCollectionToCreate:{features:[]},editingPlekollection:!1,editingPlekje:!1},mutations:{setUserIsAuthenticated:function(e,t){e.userIsAuthenticated=t},filterFeatureCollections:function(e,t){e.featureCollections=e.featureCollections.filter((function(e){return e.props.name!=t}))}},actions:{auth0Login:function(e){e.state.auth0.authorize()},auth0HandleAuthentication:function(e){e.state.auth0.parseHash((function(t,n){if(n&&n.accessToken&&n.idToken){var o=JSON.stringify((new Date).getTime()+1e3*n.expiresIn);localStorage.setItem("access_token",n.accessToken),localStorage.setItem("id_token",n.idToken),localStorage.setItem("expires_at",o),e.dispatch("auth0getUserEmail"),r["a"].replace("/intern"),t&&(alert("login failed"),r["a"].replace("/"),console.log(t))}}))},auth0getUserEmail:function(e){localStorage.getItem("access_token")&&e.state.auth0.client.userInfo(localStorage.getItem("access_token"),(function(t,n){n&&(e.state.userEmail=n.email)}))},auth0Logout:function(e){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),window.location.href="https://tijs-app.eu.auth0.com/v2/logout?returnTo=https://tijsvandenheuvel.github.io/plekjes&client_id=GSTtuqSVd4zA7NvQ8qeVszNDDMhJq0Hi"}}})},e370:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("45fc"),n("0d03"),n("ac1f"),n("5319");var o=n("6c02"),a=n("7a23");function r(e,t,n,o,r,i){var l=Object(a["A"])("Map"),s=Object(a["A"])("LoadUserData");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["j"])(l),this.$store.state.userEmail?(Object(a["t"])(),Object(a["d"])(s,{key:0})):Object(a["e"])("",!0)],64)}var i={id:"mapContainer"},l={class:"leaflet-bottom"},s={class:"map-buttons"},c={key:3,class:"map-button"};function u(e,t,n,o,r,u){var d=this;return Object(a["t"])(),Object(a["f"])("div",i,[Object(a["g"])("div",l,[Object(a["g"])("div",s,[this.$store.state.userIsAuthenticated?this.$store.state.editingPlekollection?(Object(a["t"])(),Object(a["f"])("button",{key:1,class:"btn map-button",onClick:t[1]||(t[1]=function(e){return u.save()})}," save ")):1==this.$store.state.featureCollections.length&&this.$store.state.featureCollections[0].features&&this.$store.state.featureCollections[0].features.length>1?(Object(a["t"])(),Object(a["f"])("button",{key:2,class:"btn map-button",onClick:t[2]||(t[2]=function(e){return u.edit()})}," edit ")):r.focusPoint?(Object(a["t"])(),Object(a["f"])("div",c,[Object(a["g"])("button",{class:"btn",onClick:t[3]||(t[3]=function(e){return u.savePlekje()})}," save plekje "),Object(a["g"])("button",{class:"btn",onClick:t[4]||(t[4]=function(e){return u.cancelSelectPlekje()})}," cancel ")])):(Object(a["t"])(),Object(a["f"])("button",{key:4,class:"btn",onClick:t[5]||(t[5]=function(e){return u.create()})},"+")):(Object(a["t"])(),Object(a["f"])("button",{key:0,class:"btn",onClick:t[0]||(t[0]=function(e){return d.$store.dispatch("auth0Login")})}," Log in / Sign up "))])])])}n("d81d"),n("b0c0"),n("4160"),n("159b");var d,f=n("e11e"),p=n.n(f),h=(n("6cc5"),n("20d6"),n("5fbf"),n("7c15"));delete p.a.Icon.Default.prototype._getIconUrl,p.a.Icon.Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var m={data:function(){return{osm_layer:p.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),layercontrol:p.a.control.layers(),polygonMarkerOptions:{radius:2,fillColor:"green",color:"green",weight:2,opacity:.5,fillOpacity:.2},pointMarkerOptions:{radius:3,fillColor:"red",color:"red",weight:3,opacity:1,fillOpacity:.2},drawControl:null,focusPoint:null,cancelSelectedPlekje:!1,savingSelectedPlekje:!1}},methods:{setupMap:function(){d=p.a.map("mapContainer",{center:[51.11,4.46],crs:p.a.CRS.EPSG3857,zoom:11,zoomControl:!0,preferCanvas:!1}),this.osm_layer.addTo(d),p.a.control.scale().addTo(d),this.layercontrol.addTo(d),this.layercontrol.addBaseLayer(this.osm_layer,"OSM layer")},addToolTip:function(e,t){e.properties&&e.properties.name&&t.bindTooltip(e.properties.name)},displayFeatures:function(e){var t,n=this;t=this.$store.state.editingPlekollection?this.drawnItems:p.a.featureGroup().addTo(d),e.features.forEach((function(e){switch(e.geometry.type){case"Point":n.$store.state.editingPlekollection?p.a.geoJSON(e,{onEachFeature:n.addToolTip}).addTo(t):p.a.geoJSON(e,{pointToLayer:function(e,t){return p.a.circleMarker(t,n.pointMarkerOptions)},onEachFeature:n.addToolTip}).addTo(t);break;case"Polygon":case"MultiPolygon":p.a.geoJSON(e,{style:n.polygonMarkerOptions,onEachFeature:n.addToolTip}).addTo(t);break;default:p.a.geoJSON(e,{onEachFeature:n.addToolTip}).addTo(t)}})),this.$store.state.editingPlekollection||this.layercontrol.addOverlay(t,e.props.name)},clearMapLayers:function(){var e=this;d.eachLayer((function(t){t._url||(d.removeLayer(t),e.layercontrol.removeLayer(t))}))},displayFeatureCollections:function(){var e=this;this.clearMapLayers(),this.$store.state.featureCollections.forEach((function(t){e.displayFeatures(t)}))},addDrawControl:function(e){var t=this;this.drawControl||(this.drawnItems=(new p.a.FeatureGroup).addTo(d),this.layercontrol.addOverlay(this.drawnItems,e),this.drawControl=new p.a.Control.Draw({edit:{featureGroup:this.drawnItems,edit:!1},draw:{marker:!0,polygon:!0,polyline:!0,circle:!1,rectangle:!1,circlemarker:!1}}),this.drawControl.addTo(d),p.a.Draw.Polyline.prototype._onTouch=p.a.Util.falseFn,d.on("draw:created",(function(e){var n=e.layer;n.properties={};var o=n.feature=n.feature||{};o.type="Feature",o.properties=o.properties||{};var a=prompt("Name Plekje"," ");null!=a&&" "!=a&&(o.properties["name"]=a,n.bindTooltip(o.properties["name"]),t.drawnItems.addLayer(n),t.$store.state.editingPlekollection&&t.$store.state.featureCollectionToEdit.features.push(n.toGeoJSON()))})))},create:function(){var e=this;h.createPlekollection(null,[],(function(t){t&&(e.$store.state.selectedPlekollection=t,h.setFeatureCollectionToEdit((function(){e.displayFeatureCollections(),e.addDrawControl(e.$store.state.featureCollectionToEdit.props.name),e.displayFeatures(e.$store.state.featureCollectionToEdit)})))}))},save:function(){var e=this;this.$store.state.editingPlekollection&&h.editPlekollectionFlow((function(){e.displayFeatureCollections()})),this.drawnItems=null,this.drawControl=null,this.layercontrol=p.a.control.layers(),d.remove(),this.setupMap(),this.displayFeatureCollections()},edit:function(){this.$store.state.editingPlekollection=!0,this.$store.state.featureCollectionToEdit=this.$store.state.featureCollections[0],this.$store.state.featureCollections=[],this.displayFeatureCollections(),this.addDrawControl(this.$store.state.featureCollectionToEdit.props.name),this.displayFeatures(this.$store.state.featureCollectionToEdit)},savePlekje:function(){this.savingSelectedPlekje=!0;var e=prompt("Name Plekje","");e&&(h.createPlekje(this.focusPoint.toGeoJSON(),e),d.removeLayer(this.focusPoint),this.focusPoint=null)},cancelSelectPlekje:function(){this.cancelSelectedPlekje=!0,d.removeLayer(this.focusPoint),this.focusPoint=null}},mounted:function(){var e=this;this.setupMap(),this.$store.state.editingPlekollection?(this.addDrawControl(this.$store.state.featureCollectionToEdit.props.name),this.displayFeatures(this.$store.state.featureCollectionToEdit)):this.displayFeatureCollections(),d.on("click",(function(t){if(!e.$store.state.editingPlekollection&&!e.cancelSelectedPlekje&&!e.savingSelectedPlekje){var n=t.latlng;e.focusPoint?e.focusPoint.setLatLng(n):e.focusPoint=p.a.circleMarker(n,{radius:15,color:"#17a2b8",fillOpacity:0}).addTo(d)}e.cancelSelectedPlekje=!1,e.savingSelectedPlekje=!1}))},beforeUnmount:function(){d&&d.remove()}},k=(n("9d7c"),n("6b0d")),g=n.n(k);const v=g()(m,[["render",u]]);var j=v;function b(e,t,n,o,a,r){return null}var y=n("7c15"),O={beforeCreate:function(){this.$store.state.userEmail&&!this.$store.state.userData&&y.setUserData()}};const P=g()(O,[["render",b]]);var S=P,_={components:{Map:j,LoadUserData:S},beforeCreate:function(){this.$store.state.userIsAuthenticated&&!this.$store.state.userEmail&&this.$store.dispatch("auth0getUserEmail")}};const T=g()(_,[["render",r]]);var C=T,w=n("da6f"),E=[{path:"/",name:"Home",component:C},{path:"/auth0callback",component:C},{path:"/intern",name:"Intern",component:function(){return n.e("about").then(n.bind(null,"2623"))}},{path:"/extern",name:"Extern",component:function(){return n.e("about").then(n.bind(null,"5a21"))}}],N=Object(o["a"])({history:Object(o["b"])("/"),routes:E});N.beforeEach((function(e,t,n){e.matched.some((function(e){return"/auth0callback"==e.path}))&&w["a"].dispatch("auth0HandleAuthentication");var o=!1;if(localStorage.getItem("access_token")&&localStorage.getItem("id_token")&&localStorage.getItem("expires_at")){var a=JSON.parse(localStorage.getItem("expires_at"));o=(new Date).getTime()<a}w["a"].commit("setUserIsAuthenticated",o),e.matched.some((function(e){return e.meta.requiresAuth}))?o?(w["a"].commit("setUserIsAuthenticated",!0),n()):N.replace("/"):n()}));t["a"]=N}});
//# sourceMappingURL=app.dd376dba.js.map