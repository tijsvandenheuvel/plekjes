(function(e){function t(t){for(var o,a,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e7f9722b"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"f54530f3"}[e]+".css",r=c.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===o||u===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"042f":function(e,t,n){},2140:function(e,t,n){"use strict";n("b4ac")},5121:function(e,t,n){"use strict";n("a7cf")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={id:"main"};function r(e,t,n,r,i,s){var c=Object(o["A"])("router-view"),l=Object(o["A"])("Nav");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",a,[Object(o["j"])(c)]),Object(o["j"])(l,{id:"nav"})],64)}var i={class:"nav"},s=Object(o["i"])("I"),c=Object(o["i"])("O"),l=Object(o["i"])("E");function u(e,t,n,a,r,u){var d=Object(o["A"])("router-link");return Object(o["t"])(),Object(o["f"])("div",i,[Object(o["j"])(d,{to:"/intern"},{default:Object(o["I"])((function(){return[s]})),_:1}),Object(o["j"])(d,{to:"/"},{default:Object(o["I"])((function(){return[c]})),_:1}),Object(o["j"])(d,{to:"/extern"},{default:Object(o["I"])((function(){return[l]})),_:1})])}var d={},f=(n("2140"),n("6b0d")),p=n.n(f);const h=p()(d,[["render",u]]);var m=h,k={name:"App",components:{Nav:m},data:function(){return{}}};n("897a");const g=p()(k,[["render",r]]);var v=g,j=n("da6f"),b=n("e370");Object(o["c"])(v).use(j["a"]).use(b["a"]).mount("#app")},"6f5d":function(e,t,n){},"73b8":function(e,t,n){"use strict";n("042f")},"7c15":function(e,t,n){"use strict";n.r(t),n.d(t,"setSelectedPlekje",(function(){return i})),n.d(t,"updateSelectedPlekje",(function(){return s})),n.d(t,"getPlekjesWithoutTags",(function(){return c})),n.d(t,"addSinglePlekjeToMap",(function(){return l})),n.d(t,"removePlekje",(function(){return u})),n.d(t,"createPlekje",(function(){return d})),n.d(t,"renamePlekje",(function(){return f})),n.d(t,"setSelectedPlekollection",(function(){return v})),n.d(t,"getPlekollections",(function(){return j})),n.d(t,"createPlekollection",(function(){return b})),n.d(t,"editPlekollectionFlow",(function(){return y})),n.d(t,"removePlekollection",(function(){return O})),n.d(t,"renamePlekollection",(function(){return P})),n.d(t,"setUserData",(function(){return w})),n.d(t,"checkUserNameAvailability",(function(){return E})),n.d(t,"setFeatureCollectionToEdit",(function(){return I})),n.d(t,"setFeatureCollectionToMap",(function(){return $}));n("4de4"),n("d3b7"),n("accc"),n("0d03"),n("b0c0"),n("e9c4"),n("caad"),n("2532"),n("d81d"),n("ac1f"),n("5319"),n("4160"),n("159b"),n("99af");var o=n("da6f"),a=n("e370"),r=function(e,t,n,o){var a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer ".concat(localStorage.getItem("access_token"))),a.send(n),a.onreadystatechange=function(){4==a.readyState&&"200"==a.status&&o(a.responseText)}};function i(e,t){p(e,(function(e){j(e.tags,(function(e){t(e)}))}))}function s(e,t){var n=o["a"].state.selectedPlekje;switch(t){case"add":n.tags.push(e._id);break;case"remove":n.tags=n.tags.filter((function(t){return t!=e._id}));break}n.updatedAt=(new Date).toISOString(),g(n._id,n,(function(){})),S(e._id,(function(e){switch(t){case"add":e.plekjes.push({_id:n._id,name:n.name});break;case"remove":e.plekjes=e.plekjes.filter((function(e){return e._id!=n._id}));break}e.updatedAt=(new Date).toISOString(),_(e._id,e,(function(){}))}))}function c(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekjes/get_no_tag/",n,(function(e){t(JSON.parse(e))}))}function l(){console.log(o["a"].state.selectedPlekje.name),o["a"].state.featureCollections.map((function(e){return e.props.name})).includes(o["a"].state.selectedPlekje.name)||o["a"].state.featureCollections.push(A([o["a"].state.selectedPlekje],!0)),a["a"].replace("/")}function u(){var e=o["a"].state.selectedPlekje;e.tags.length>0&&e.tags.forEach((function(t){C(t,null,[e._id],(function(){}))})),L(null,null,[e],null),o["a"].state.selectedPlekje=null,o["a"].state.editingPlekje=!1}function d(e,t){m(e,t,(function(e){L(null,[e])}))}function f(e){var t=o["a"].state.selectedPlekje;t.name=e,t.updatedAt=(new Date).toISOString(),g(t._id,t,(function(){})),t.tags.forEach((function(n){C(n,[{name:e,_id:g._id}],[t._id],(function(){}))})),L(null,[{name:e,_id:g._id}],[t._id],null),o["a"].state.selectedPlekje=null}var p=function(e,t){r("GET","https://plekjes-server.herokuapp.com/plekjes/get_one/"+e,null,(function(e){if(e){var n=JSON.parse(e);o["a"].state.selectedPlekje=n,t(n)}}))},h=function(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekjes/get_multiple/",n,(function(e){t(JSON.parse(e))}))},m=function(e,t,n){var a={name:t,tags:[],founder:o["a"].state.userData.username,geometry:e.geometry};r("POST","https://plekjes-server.herokuapp.com/plekjes/new",JSON.stringify(a),(function(e){n(JSON.parse(e))}))},k=function(e,t,n){for(var a=[],i=0;i<e.length;i++)a.push({name:e[i].properties.name,tags:[t],founder:o["a"].state.userData.username,geometry:e[i].geometry});r("POST","https://plekjes-server.herokuapp.com/plekjes/add_multiple",JSON.stringify(a),(function(e){n(JSON.parse(e))}))},g=function(e,t,n){r("PUT","https://plekjes-server.herokuapp.com/plekjes/update/"+e,JSON.stringify(t),(function(e){n()}))};function v(e,t){S(e,(function(e){o["a"].state.selectedPlekollection=e,t()}))}function j(e,t){var n=JSON.stringify({ids:e});r("POST","https://plekjes-server.herokuapp.com/plekollections/get_multiple/",n,(function(e){var n=JSON.parse(e);t(n||[])}))}function b(e,t,n){if(e||(e=prompt("Name Plekollection","")),e&&e.length>0&&" "!=e){var a={name:e,collector:o["a"].state.userData.username,plekjes:t};r("POST","https://plekjes-server.herokuapp.com/plekollections/new",JSON.stringify(a),(function(e){var o=JSON.parse(e);L(o,t),n(o)}))}else n(null)}function y(e){var t=o["a"].state.featureCollectionToEdit.props.id;S(t,(function(n){var a=[],r=[];o["a"].state.featureCollectionToEdit.features.forEach((function(e){e.properties.id?r.push(e.properties.id):a.push(e)}));var i=[];n.plekjes.forEach((function(e){r.includes(e._id)||i.push(e._id)})),h(i,(function(e){e.forEach((function(e){e.tags=e.tags.filter((function(e){return e!=t})),e.updatedAt=(new Date).toISOString(),g(e._id,e,(function(){}))}))})),a.length>0?k(a,t,(function(n){L(null,n,null,null),C(t,n,i,(function(){o["a"].state.editingPlekollection=!1,v(t,(function(){$((function(){e()}))}))}))})):C(t,null,i,(function(){o["a"].state.editingPlekollection=!1,v(t,(function(){$((function(){e()}))}))}))}))}function O(){var e=o["a"].state.featureCollectionToEdit.props.id;console.log(e),o["a"].state.featureCollectionToEdit.features&&o["a"].state.featureCollectionToEdit.features>0&&h(o["a"].state.featureCollectionToEdit.features.map((function(e){return e.properties.id})),(function(t){t.forEach((function(t){t.tags=t.tags.filter((function(t){return t!=e})),t.updatedAt=(new Date).toISOString(),g(t._id,t,(function(){o["a"].state.editingPlekollection=!1}))}))})),L(null,null,null,[{_id:e}]),T(e),o["a"].state.editingPlekollection=!1}function P(e){var t=o["a"].state.selectedPlekollection;t.name=e,t.updatedAt=(new Date).toISOString(),_(t._id,t,(function(){})),L(t,null,null,[o["a"].state.selectedPlekollection]),o["a"].state.selectedPlekollection=null}var S=function(e,t){r("GET","https://plekjes-server.herokuapp.com/plekollections/get_one/"+e,null,(function(e){e&&t(JSON.parse(e))}))},C=function(e,t,n,o){S(e,(function(a){a&&(n&&n.length>0&&n.forEach((function(e){a.plekjes=a.plekjes.filter((function(t){return t._id!=e}))})),t&&(a.plekjes=a.plekjes.concat(t)),a.updatedAt=(new Date).toISOString(),_(e,a,(function(){o()})))}))},_=function(e,t,n){r("PUT","https://plekjes-server.herokuapp.com/plekollections/update/"+e,JSON.stringify(t),(function(e){n()}))},T=function(e){r("DELETE","https://plekjes-server.herokuapp.com/plekollections/delete",JSON.stringify({id:e}),(function(e){}))};function w(){var e=JSON.stringify({email:o["a"].state.userEmail});r("POST","https://plekjes-server.herokuapp.com/users/get_one",e,(function(e){var t=JSON.parse(e);t?o["a"].state.userData=t:o["a"].state.userToBeCreated=!0}))}function E(e,t){var n=JSON.stringify({username:e});r("POST","https://plekjes-server.herokuapp.com/users/name_check",n,(function(n){var o="true"===n;o&&N(e),t(o)}))}var N=function(e){var t={email:o["a"].state.userEmail,username:e,my_plekjes:[],my_plekollections:[]};r("POST","https://plekjes-server.herokuapp.com/users/new",JSON.stringify(t),(function(e){o["a"].state.userToBeCreated=!1,w()}))},L=function(e,t,n,a){var i=JSON.stringify({email:o["a"].state.userEmail});r("POST","https://plekjes-server.herokuapp.com/users/get_one",i,(function(o){var i=JSON.parse(o);if(a){var s=a.map((function(e){return e._id}));i.my_plekollections=i.my_plekollections.filter((function(e){return!s.includes(e._id)}))}if(e&&i.my_plekollections.push({name:e.name,_id:e._id}),n){var c=n.map((function(e){return e._id}));i.my_plekjes=i.my_plekjes.filter((function(e){return!c.includes(e._id)}))}t&&t.length>0&&(i.my_plekjes=i.my_plekjes.concat(t)),r("PUT","https://plekjes-server.herokuapp.com/users/update/"+i._id,JSON.stringify(i),(function(e){w()}))}))};function I(e){o["a"].state.editingPlekollection=!0,o["a"].state.featureCollections=[],J((function(t){o["a"].state.featureCollectionToEdit=t,e()}))}function $(e){o["a"].state.featureCollections.map((function(e){return e.props.name})).includes(o["a"].state.selectedPlekollection.name)?a["a"].replace("/"):J((function(t){o["a"].state.featureCollections.push(t),e()}))}var J=function(e){var t=o["a"].state.selectedPlekollection.plekjes.map((function(e){return e._id}));h(t,(function(t){e(A(t))}))},A=function(e,t){var n;return n=t?{type:"FeatureCollection",props:{name:o["a"].state.selectedPlekje.name,id:o["a"].state.selectedPlekje._id},features:[]}:{type:"FeatureCollection",props:{name:o["a"].state.selectedPlekollection.name,id:o["a"].state.selectedPlekollection._id},features:[]},e.forEach((function(e){n.features.push({type:"Feature",properties:{name:e.name,id:e._id},geometry:e.geometry})})),n}},"897a":function(e,t,n){"use strict";n("6f5d")},a7cf:function(e,t,n){},b4ac:function(e,t,n){},da6f:function(e,t,n){"use strict";n("4de4"),n("d3b7"),n("b0c0"),n("e9c4"),n("0d03"),n("ac1f"),n("5319");var o=n("5502"),a=n("b0af"),r=n("e370");t["a"]=Object(o["a"])({state:{auth0:new a["a"].WebAuth({domain:"tijs-app.eu.auth0.com",clientID:"GSTtuqSVd4zA7NvQ8qeVszNDDMhJq0Hi",redirectUri:"https://tijsvandenheuvel.github.io/plekjes/auth0callback",responseType:"token id_token",scope:"openid profile email",audience:"https://plekjes-api.be"}),userIsAuthenticated:!1,userEmail:null,userData:null,userToBeCreated:!1,selectedPlekollection:null,selectedPlekje:null,featureCollections:[],featureCollectionToEdit:null,featureCollectionToCreate:{features:[]},editingPlekollection:!1,editingPlekje:!1},mutations:{setUserIsAuthenticated:function(e,t){e.userIsAuthenticated=t},filterFeatureCollections:function(e,t){e.featureCollections=e.featureCollections.filter((function(e){return e.props.name!=t}))}},actions:{auth0Login:function(e){e.state.auth0.authorize()},auth0HandleAuthentication:function(e){e.state.auth0.parseHash((function(t,n){if(n&&n.accessToken&&n.idToken){var o=JSON.stringify((new Date).getTime()+1e3*n.expiresIn);localStorage.setItem("access_token",n.accessToken),localStorage.setItem("id_token",n.idToken),localStorage.setItem("expires_at",o),e.dispatch("auth0getUserEmail"),r["a"].replace("/intern"),t&&(alert("login failed"),r["a"].replace("/"),console.log(t))}}))},auth0getUserEmail:function(e){localStorage.getItem("access_token")&&e.state.auth0.client.userInfo(localStorage.getItem("access_token"),(function(t,n){n&&(e.state.userEmail=n.email)}))},auth0Logout:function(e){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),window.location.href="https://tijs-app.eu.auth0.com/v2/logout?returnTo=https://tijsvandenheuvel.github.io/plekjes&client_id=GSTtuqSVd4zA7NvQ8qeVszNDDMhJq0Hi"}}})},e370:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("45fc"),n("0d03"),n("ac1f"),n("5319");var o=n("6c02"),a=n("7a23");function r(e,t,n,o,r,i){var s=Object(a["A"])("Map"),c=Object(a["A"])("LoadUserData");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["j"])(s),this.$store.state.userEmail?(Object(a["t"])(),Object(a["d"])(c,{key:0})):Object(a["e"])("",!0)],64)}var i={id:"mapContainer"};function s(e,t,n,o,r,s){var c=Object(a["A"])("MapButtons");return Object(a["t"])(),Object(a["f"])("div",i,[Object(a["j"])(c,{onLocate:s.locateUser,onSave:s.save,onEdit:s.edit,onCreate:s.create,onSavePlekje:s.savePlekje,onCancelSelectPlekje:s.cancelSelectPlekje,onSaveHere:s.saveHere,focusPoint:r.focusPoint,userLocation:r.userLocation},null,8,["onLocate","onSave","onEdit","onCreate","onSavePlekje","onCancelSelectPlekje","onSaveHere","focusPoint","userLocation"])])}n("d81d"),n("b0c0"),n("4160"),n("159b");var c=n("e11e"),l=n.n(c),u=(n("6cc5"),n("20d6"),n("5fbf"),{class:""}),d=Object(a["g"])("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 122.88",style:{"enable-background":"new 0 0 122.88 122.88"},"xml:space":"preserve"},[Object(a["g"])("g",null,[Object(a["g"])("path",{d:"M68.23,13.49c10.44,1.49,19.79,6.36,26.91,13.48c7.29,7.29,12.23,16.93,13.58,27.68h14.17v13.58h-14.39 c-1.62,10.13-6.42,19.2-13.36,26.13c-7.11,7.11-16.47,11.99-26.91,13.48v15.04H54.65v-15.04c-10.44-1.49-19.79-6.36-26.9-13.48 c-6.94-6.94-11.74-16-13.36-26.13H0V54.65h14.16c1.35-10.75,6.29-20.39,13.58-27.68c7.11-7.11,16.46-11.99,26.9-13.48V0h13.58 V13.49L68.23,13.49z M61.44,35.41c13.95,0,25.25,11.31,25.25,25.25c0,13.95-11.31,25.25-25.25,25.25 c-13.95,0-25.25-11.31-25.25-25.25C36.19,46.72,47.49,35.41,61.44,35.41L61.44,35.41z M89,33.11c-7.05-7.05-16.8-11.42-27.56-11.42 c-10.76,0-20.51,4.36-27.56,11.42c-7.05,7.05-11.42,16.8-11.42,27.56c0,10.76,4.36,20.51,11.42,27.56 c7.05,7.05,16.8,11.42,27.56,11.42c10.76,0,20.51-4.36,27.56-11.42c7.05-7.05,11.42-16.8,11.42-27.56 C100.41,49.9,96.05,40.16,89,33.11L89,33.11z"})])],-1),f=[d],p={class:"leaflet-bottom map-buttons"},h={key:3,class:"map-btn-center"};function m(e,t,n,o,r,i){var s=this;return Object(a["t"])(),Object(a["f"])("div",u,[Object(a["g"])("button",{class:"location-btn",onClick:t[0]||(t[0]=function(t){return e.$emit("locate")})},f),Object(a["g"])("div",p,[this.$store.state.userIsAuthenticated?this.$store.state.editingPlekollection?(Object(a["t"])(),Object(a["f"])("button",{key:1,class:"btn map-btn-center",onClick:t[2]||(t[2]=function(t){return e.$emit("save")})}," save ")):1==this.$store.state.featureCollections.length&&this.$store.state.featureCollections[0].features&&this.$store.state.featureCollections[0].features.length>1?(Object(a["t"])(),Object(a["f"])("button",{key:2,class:"btn map-btn-center",onClick:t[3]||(t[3]=function(t){return e.$emit("edit")})}," edit ")):(Object(a["t"])(),Object(a["f"])("div",h,[n.userLocation?(Object(a["t"])(),Object(a["f"])("button",{key:0,class:"btn",onClick:t[4]||(t[4]=function(t){return e.$emit("saveHere")})}," save here ")):Object(a["e"])("",!0),n.focusPoint?(Object(a["t"])(),Object(a["f"])("button",{key:1,class:"btn",onClick:t[5]||(t[5]=function(t){return e.$emit("savePlekje")})}," save plekje ")):Object(a["e"])("",!0),Object(a["g"])("button",{class:"btn",onClick:t[6]||(t[6]=function(t){return e.$emit("create")})}," + "),n.focusPoint||n.userLocation?(Object(a["t"])(),Object(a["f"])("button",{key:2,class:"btn",onClick:t[7]||(t[7]=function(t){return e.$emit("cancelSelectPlekje")})}," cancel ")):Object(a["e"])("",!0)])):(Object(a["t"])(),Object(a["f"])("button",{key:0,class:"btn",onClick:t[1]||(t[1]=function(e){return s.$store.dispatch("auth0Login")})}," Log in / Sign up "))])])}var k={emits:["locate","save","edit","create","savePlekje","saveHere","cancelSelectPlekje"],props:["focusPoint","userLocation"]},g=(n("73b8"),n("6b0d")),v=n.n(g);const j=v()(k,[["render",m]]);var b,y=j,O=n("7c15");delete l.a.Icon.Default.prototype._getIconUrl,l.a.Icon.Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var P={components:{MapButtons:y},data:function(){return{osm_layer:l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),layercontrol:l.a.control.layers(),polygonMarkerOptions:{radius:2,fillColor:"green",color:"green",weight:2,opacity:.5,fillOpacity:.2},pointMarkerOptions:{radius:3,fillColor:"red",color:"red",weight:3,opacity:1,fillOpacity:.2},drawControl:null,focusPoint:null,cancelSelectedPlekje:!1,savingSelectedPlekje:!1,userLocation:null}},methods:{setupMap:function(){b=l.a.map("mapContainer",{center:[51.11,4.46],crs:l.a.CRS.EPSG3857,zoom:11,zoomControl:!0,preferCanvas:!1}),this.osm_layer.addTo(b),l.a.control.scale().addTo(b),this.layercontrol.addTo(b),this.layercontrol.addBaseLayer(this.osm_layer,"OSM layer")},addToolTip:function(e,t){e.properties&&e.properties.name&&t.bindTooltip(e.properties.name)},displayFeatures:function(e){var t,n=this;t=this.$store.state.editingPlekollection?this.drawnItems:l.a.featureGroup().addTo(b),e.features.forEach((function(e){switch(e.geometry.type){case"Point":n.$store.state.editingPlekollection?l.a.geoJSON(e,{onEachFeature:n.addToolTip}).addTo(t):l.a.geoJSON(e,{pointToLayer:function(e,t){return l.a.circleMarker(t,n.pointMarkerOptions)},onEachFeature:n.addToolTip}).addTo(t);break;case"Polygon":case"MultiPolygon":l.a.geoJSON(e,{style:n.polygonMarkerOptions,onEachFeature:n.addToolTip}).addTo(t);break;default:l.a.geoJSON(e,{onEachFeature:n.addToolTip}).addTo(t)}})),this.$store.state.editingPlekollection||this.layercontrol.addOverlay(t,e.props.name)},clearMapLayers:function(){var e=this;b.eachLayer((function(t){t._url||(b.removeLayer(t),e.layercontrol.removeLayer(t))}))},displayFeatureCollections:function(){var e=this;this.clearMapLayers(),this.$store.state.featureCollections.forEach((function(t){e.displayFeatures(t)}))},addDrawControl:function(e){var t=this;this.drawControl||(this.drawnItems=(new l.a.FeatureGroup).addTo(b),this.layercontrol.addOverlay(this.drawnItems,e),this.drawControl=new l.a.Control.Draw({edit:{featureGroup:this.drawnItems,edit:!1},draw:{marker:!0,polygon:!0,polyline:!0,circle:!1,rectangle:!1,circlemarker:!0}}),this.drawControl.addTo(b),l.a.Draw.Polyline.prototype._onTouch=l.a.Util.falseFn,b.on("draw:created",(function(e){var n=e.layer;n.properties={};var o=n.feature=n.feature||{};o.type="Feature",o.properties=o.properties||{};var a=prompt("Name Plekje"," ");null!=a&&" "!=a&&(o.properties["name"]=a,n.bindTooltip(o.properties["name"]),t.drawnItems.addLayer(n),t.$store.state.editingPlekollection&&t.$store.state.featureCollectionToEdit.features.push(n.toGeoJSON()))})))},create:function(){var e=this;O.createPlekollection(null,[],(function(t){t&&(e.$store.state.selectedPlekollection=t,O.setFeatureCollectionToEdit((function(){e.displayFeatureCollections(),e.addDrawControl(e.$store.state.featureCollectionToEdit.props.name),e.displayFeatures(e.$store.state.featureCollectionToEdit)})))}))},save:function(){var e=this;this.$store.state.editingPlekollection&&O.editPlekollectionFlow((function(){e.displayFeatureCollections()})),this.drawnItems=null,this.drawControl=null,this.layercontrol=l.a.control.layers(),b.remove(),this.setupMap(),this.displayFeatureCollections()},edit:function(){this.$store.state.editingPlekollection=!0,this.$store.state.featureCollectionToEdit=this.$store.state.featureCollections[0],this.$store.state.featureCollections=[],this.displayFeatureCollections(),this.addDrawControl(this.$store.state.featureCollectionToEdit.props.name),this.displayFeatures(this.$store.state.featureCollectionToEdit)},savePlekje:function(){this.savingSelectedPlekje=!0;var e=prompt("Name Plekje","");e&&(O.createPlekje(this.focusPoint.toGeoJSON(),e),b.removeLayer(this.focusPoint),this.focusPoint=null)},saveHere:function(){var e=prompt("Name Plekje","");e&&O.createPlekje(this.userLocation.toGeoJSON(),e)},cancelSelectPlekje:function(){this.cancelSelectedPlekje=!0,b.removeLayer(this.focusPoint),this.focusPoint=null,this.userLocation=null},locateUser:function(){console.log("locating"),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,(function(e){console.log(e)})):console.log("Geolocation is not supported by this browser.")},showPosition:function(e){this.userLocation?this.userLocation.setLatLng([e.coords.latitude,e.coords.longitude]):this.userLocation=l.a.circleMarker([e.coords.latitude,e.coords.longitude],{radius:15,color:"#17a2b8",fillOpacity:0}).addTo(b),b.panTo(new l.a.LatLng(e.coords.latitude,e.coords.longitude))}},mounted:function(){var e=this;this.setupMap(),this.$store.state.editingPlekollection?(this.addDrawControl(this.$store.state.featureCollectionToEdit.props.name),this.displayFeatures(this.$store.state.featureCollectionToEdit)):this.displayFeatureCollections(),b.on("click",(function(t){if(!e.$store.state.editingPlekollection&&!e.cancelSelectedPlekje&&!e.savingSelectedPlekje){var n=t.latlng;e.focusPoint?e.focusPoint.setLatLng(n):e.focusPoint=l.a.circleMarker(n,{radius:12,color:"#0d6efd",fillOpacity:0}).addTo(b)}e.cancelSelectedPlekje=!1,e.savingSelectedPlekje=!1}))},beforeUnmount:function(){b&&b.remove()}};n("5121");const S=v()(P,[["render",s]]);var C=S;function _(e,t,n,o,a,r){return null}var T=n("7c15"),w={beforeCreate:function(){this.$store.state.userEmail&&!this.$store.state.userData&&T.setUserData()}};const E=v()(w,[["render",_]]);var N=E,L={components:{Map:C,LoadUserData:N},beforeCreate:function(){this.$store.state.userIsAuthenticated&&!this.$store.state.userEmail&&this.$store.dispatch("auth0getUserEmail")}};const I=v()(L,[["render",r]]);var $=I,J=n("da6f"),A=[{path:"/",name:"Home",component:$},{path:"/auth0callback",component:$},{path:"/intern",name:"Intern",component:function(){return n.e("about").then(n.bind(null,"2623"))}},{path:"/extern",name:"Extern",component:function(){return n.e("about").then(n.bind(null,"5a21"))}}],D=Object(o["a"])({history:Object(o["b"])("/"),routes:A});D.beforeEach((function(e,t,n){e.matched.some((function(e){return"/auth0callback"==e.path}))&&J["a"].dispatch("auth0HandleAuthentication");var o=!1;if(localStorage.getItem("access_token")&&localStorage.getItem("id_token")&&localStorage.getItem("expires_at")){var a=JSON.parse(localStorage.getItem("expires_at"));o=(new Date).getTime()<a}J["a"].commit("setUserIsAuthenticated",o),e.matched.some((function(e){return e.meta.requiresAuth}))?o?(J["a"].commit("setUserIsAuthenticated",!0),n()):D.replace("/"):n()}));t["a"]=D}});
//# sourceMappingURL=app.1b0d8c08.js.map